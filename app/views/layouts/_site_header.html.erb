<div class="header">
  <ul>
    <% @site.header.elements.each do |element| %>
    <% e = element.child %>
    <li>
      <div id="element_<%= element.id %>" class="element" style="width:<%= element.width %>px; height:<%= element.height %>px; left:<%= element.left %>px; top:<%= element.top %>px; z-index:<%= element.z_index %>;">
        <div class="element-container">
        <% if e.class.name == "Image" %>
        <div class="image-holder">
          <div class="image-container" style="width:<%= element.image_width %>px; height:<%= element.image_height %>px; left:<%= element.image_left %>px; top:<%= element.image_top %>px;">
        <%= image_tag e.image_file_url(:medium).to_s, alt: "Test Image" %>
          </div>
        </div>
        <% elsif e.class.name == "PageText" %>
        <div class="text-container" style="<%= e.style %>"><%= e.content.html_safe %></div>
        <% end %>
        </div>
      </div>
    </li>
    <% end %>
  </ul>
</div>

<div class="navigation">
  <div class="navbar navbar-inverse">
    <div class="navbar-inner">
      <%= link_to @site.name, site_path(@site), class: 'logo' %>
      <ul class="nav">
        <% @nav_items.includes(:navable).each do |nav_item| %>
          <% unless nav_item.parent %>
            <% if nav_item.navable.class.name == "Folder" %>
              <li class="dropdown">
                <%= link_to "#{nav_item.navable.name}<b class='caret'></b>".html_safe, '#', class: "dropdown-toggle", 'data-toggle' => 'dropdown' %>
                <% if nav_item.children %>
                  <ul class='dropdown-menu'>
                    <% nav_item.children.each do |subnav_item| %>
                      <li><%= sitelink(@site,subnav_item.navable) %></li>
                    <% end %>
                  </ul>
                <% end %>
              </li>
             <% else %>
             <li><%= sitelink(@site,nav_item.navable) %></li>
             <% end %>
          <% end %>
        <% end %>    
      </ul>
    </div>
  </div>
</div>
